<header class="site-header" role="banner">
  <div class="site-header-inner">

    <a class="site-title" href="{{ "/" | relative_url }}"><span class="site-title-g">G</span>ridwise</a>

    <div class="site-header-spacer"></div>

    <nav class="site-nav">

      <!-- Articles dropdown -->
      <div class="nav-dropdown nav-dropdown-hover">
        <button class="nav-btn nav-dropdown-btn" aria-expanded="false">
          Articles
          <svg class="chevron" width="10" height="6" viewBox="0 0 10 6" fill="none">
            <path d="M1 1l4 4 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
        <div class="dropdown-panel">
          {%- assign gridwise_pages = site.pages | where: "category", "gridwise" | sort: "order" -%}
          {%- for p in gridwise_pages -%}
            {%- unless p.url contains "examples" -%}
              <a class="dropdown-item" href="{{ p.url | relative_url }}">{{ p.title | escape }}</a>
            {%- endunless -%}
          {%- endfor -%}
        </div>
      </div>

      <!-- Examples: click goes to examples page, hover shows list -->
      <div class="nav-dropdown nav-dropdown-hover">
        <a class="nav-btn" href="{{ "/examples.html" | relative_url }}">
          Examples
          <svg class="chevron" width="10" height="6" viewBox="0 0 10 6" fill="none">
            <path d="M1 1l4 4 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </a>
        <div class="dropdown-panel">
          <a class="dropdown-item" href="{{ "/examples.html#scan" | relative_url }}">Scan</a>
          <a class="dropdown-item" href="{{ "/examples.html#sort" | relative_url }}">Sort</a>
          <a class="dropdown-item" href="{{ "/examples.html#reduce" | relative_url }}">Reduce</a>
          <a class="dropdown-item" href="{{ "/examples.html#performance" | relative_url }}">Performance</a>
          <a class="dropdown-item" href="{{ "/examples.html#testing" | relative_url }}">Testing</a>
        </div>
      </div>

      <a class="nav-btn" href="{{ "/" | relative_url }}">Docs</a>
      <a class="nav-btn nav-btn-solid" href="javascript:void(0)" onclick="launchExample()">Try it</a>

    </nav>

  </div>
</header>

<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
  .site-header {
    position: sticky;
    top: 0;
    z-index: 500;
    background: rgba(255,255,255,0.97);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border-bottom: 1px solid #e9e9e7;
  }

  .site-header-inner {
    max-width: 1200px;
    margin: 0 auto;
    height: 62px;
    padding: 0 28px 0 8px;
    display: flex;
    align-items: center;
  }

  .site-header-spacer { flex: 1; }

  .site-title {
    font-size: 28px;
    font-weight: 600;
    font-family: 'Space Grotesk', sans-serif;
    color: #111;
    text-decoration: none;
    letter-spacing: -0.8px;
    white-space: nowrap;
    flex-shrink: 0;
    margin-right: auto;
  }
  .site-title:hover { color: #28a745; }

  .site-nav {
    display: flex;
    align-items: center;
    gap: 4px;
  }

  .nav-btn {
    font-size: 15px;
    font-weight: 500;
    color: #3b3b3b;
    background: none;
    border: none;
    cursor: pointer;
    font-family: inherit;
    text-decoration: none;
    padding: 7px 12px;
    border-radius: 6px;
    display: inline-flex;
    align-items: center;
    gap: 5px;
    transition: background 0.1s, color 0.1s;
    white-space: nowrap;
    line-height: 1;
  }
  .nav-btn:hover { background: #eaf7ee; color: #28a745; }

  .nav-btn-solid {
    background: #28a745;
    color: #fff !important;
    margin-left: 6px;
  }
  .nav-btn-solid:hover { background: #22913c; }

  .chevron {
    opacity: 0.45;
    transition: transform 0.15s;
    flex-shrink: 0;
  }
  .nav-dropdown-btn[aria-expanded="true"] .chevron {
    transform: rotate(180deg);
    opacity: 0.8;
  }
  .nav-dropdown-btn[aria-expanded="true"] {
    color: #28a745;
    background: #eaf7ee;
  }

  .nav-dropdown { position: relative; }

  /* click-triggered dropdown (Articles) */
  .dropdown-panel {
    display: none;
    position: absolute;
    top: calc(100% + 6px);
    right: 0;
    left: auto;
    background: #fff;
    border: 1px solid #e3e3e0;
    border-radius: 8px;
    min-width: 185px;
    padding: 4px;
    z-index: 200;
    box-shadow: 0 4px 16px rgba(0,0,0,0.1), 0 1px 3px rgba(0,0,0,0.06);
  }
  .dropdown-panel.is-open { display: block; }

  /* hover-triggered dropdown (Examples) */
  .nav-dropdown-hover:hover .dropdown-panel { display: block; }

  .dropdown-item {
    display: block;
    padding: 10px 14px;
    font-size: 15px;
    color: #37352f;
    text-decoration: none;
    border-radius: 5px;
    transition: background 0.1s, color 0.1s;
    white-space: nowrap;
    line-height: 1.4;
  }
  .dropdown-item:hover { background: #eaf7ee; color: #28a745; }

  @media (max-width: 640px) {
    .site-header-spacer { flex: 1; }
    .nav-btn { padding: 6px 8px; font-size: 13px; }
  }
</style>

<script>
  function launchExample() {
    window.open('https://gridwise-webgpu.github.io/gridwise/examples/scan_pane_example.html', '_blank');
  }

  document.addEventListener('DOMContentLoaded', function () {
    document.querySelectorAll('.nav-dropdown').forEach(function (dd) {
      var btn = dd.querySelector('.nav-dropdown-btn');
      var panel = dd.querySelector('.dropdown-panel');
      btn.addEventListener('click', function (e) {
        e.stopPropagation();
        var isOpen = panel.classList.contains('is-open');
        document.querySelectorAll('.dropdown-panel').forEach(function (p) { p.classList.remove('is-open'); });
        document.querySelectorAll('.nav-dropdown-btn').forEach(function (b) { b.setAttribute('aria-expanded', 'false'); });
        if (!isOpen) {
          panel.classList.add('is-open');
          btn.setAttribute('aria-expanded', 'true');
        }
      });
    });
    document.addEventListener('click', function () {
      document.querySelectorAll('.dropdown-panel').forEach(function (p) { p.classList.remove('is-open'); });
      document.querySelectorAll('.nav-dropdown-btn').forEach(function (b) { b.setAttribute('aria-expanded', 'false'); });
    });
  });
</script>